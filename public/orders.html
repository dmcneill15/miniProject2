<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta name="keywords" content="HTML, CSS" />
    <meta name="author" content="D Mc Neill" />
    <title>Three Cheeses Online</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Playwrite+AU+QLD&display=swap"
      rel="stylesheet"
    />
    <!--BOOTSTRAP-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!--OWN CSS STYLING-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="index.css" />

    <style></style>
    <script>
      function showNewOrders(orders) {
        for (let i in orders) {
          const orderCardHTML = populateOrderCard(orders[i]);
          document.querySelector("#card-list").appendChild(orderCardHTML);
        }
      }

      function populateOrderCard(order) {
        const template = document.getElementById("card-template").content.cloneNode(true);
        template.querySelector(".card-title").innerText = `Order ID: ${order.id}`;
        template.querySelector(".card-customer").innerText = `Cusomer: ${order.customerName}`;
        template.querySelector(".card-pizza").innerText = `Pizza: ${order.pizzaType}`;
        template.querySelector(".card-extras").innerText = `Extra Toppings: ${order.extraToppings}`;
        template.querySelector(".card-qty").innerText = `Qty: ${order.quantity}`;
        template.querySelector(".card-drink").innerText = `Drink: ${order.drink}`;
        template.querySelector(".card-status").innerText = `Status: ${order.status}`;
        return template;
      }

      window.onload = function () {
        fetch("http://localhost:3000/orders?status=new")
          .then((response) => response.json())
          .then((json) => showNewOrders(json));
      };
    </script>
  </head>

  <body>
    <nav>
      <div class="nav-container">
        <div>
          <img
            src="/src/ThreeCheeseLogo.png"
            style="width: 9em; margin-top: 50px; margin-left: 50px"
          />
        </div>
        <div class="navlistleft">
          <ul>
            <li><a style="padding: 2px" href="./index.html">Menu</a></li>
            <li><a style="padding: 2px" href="./orders.html">Orders</a></li>
            <li><a style="padding: 2px" href="./about.html">About</a></li>
            <li>
              <a style="padding: 2px" href="./contact.html">Contact Us</a>
            </li>
          </ul>
        </div>
        <div class="navlistright">
          <ul>
            <li>
              <a href="#"><i class="fa-solid fa-magnifying-glass"></i></a>
              <a href="#"><i class="fa-solid fa-cart-shopping"></i></a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <section>
      <div class="title-container">
        <p class="slogan">Orders</p>
      </div>
    </section>

    <section>
      <div>
        <template id="card-template">
          <div class="card col-sm-4 mx-auto bg-transparent rounded-lg ">
            <div class="card-body p-3">
              <div class="card-title" style="font-weight: bold"></div>
              <div class="card-text card-customer"></div>
              <div class="card-text card-pizza"></div>
              <div class="card-text card-extras"></div>
              <div class="card-text card-qty"></div>
              <div class="card-text card-drink"></div>
              <div class="card-text card-status"></div>
            </div>
          </div>
          <br />
        </template>
        <div id="card-list"></div>
      </div>
    </section>

    <footer>
      <div class="footer">
        All rights reserved<br />
        Follow Us: <a href="#">Facebook</a> | <a href="#">Instagram</a> |
        <a href="#">Twitter</a>
      </div>
    </footer>
  </body>
</html>
